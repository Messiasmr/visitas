<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameStore - Sua Loja de Jogos Favorita</title>
    <link rel="stylesheet" href="/static/style2.css">
</head>
<body>
    <header>
        <div class="header-container">
            {% if user and user['profile_picture'] %}
                <a href="/profile">
                    <img src="/{{ user['profile_picture'] }}" alt="Foto de Perfil" class="profile-logo">
                </a>
            {% else %}
                <a href="/login" class="login-link">Login</a>
            {% endif %}
            <h1>GameStore</h1>
        </div>
        <p>Encontre os melhores jogos e compre diretamente nas lojas oficiais</p>
    </header>
    
    <div class="search-bar">
        <input type="text" id="search-input" placeholder="Procure por um jogo...">
        <button id="search-button">Buscar</button>
    </div>
    
    <div class="games-container" id="games-container">
        <!-- Os jogos serão carregados aqui dinamicamente -->
        <div class="loading">Carregando jogos...</div>
    </div>

    <div class="pagination" id="pagination">
        <!-- Botões de paginação serão gerados dinamicamente -->
    </div>

    <script>
        // Variáveis globais
        const gamesContainer = document.getElementById('games-container');
        const pagination = document.getElementById('pagination');
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');

        // Lista de 50 jogos reais
        const sampleGames = [
            { title: "The Witcher 3: Wild Hunt", image: "https://image.api.playstation.com/vulcan/ap/rnd/202211/0711/kh4MUIuMmHlktOHar3lVl6rY.png", metacritic: 92, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/292030" }] },
            { title: "Red Dead Redemption 2", image: "https://cdn.akamai.steamstatic.com/steam/apps/1174180/header.jpg", metacritic: 93, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/1174180" }] },
            { title: "Cyberpunk 2077", image: "https://cdn.akamai.steamstatic.com/steam/apps/1091500/header.jpg", metacritic: 86, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/1091500" }] },
            { title: "Hollow Knight", image: "https://cdn.akamai.steamstatic.com/steam/apps/367520/header.jpg", metacritic: 90, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/367520" }] },
            { title: "Celeste", image: "https://cdn.akamai.steamstatic.com/steam/apps/504230/header.jpg", metacritic: 94, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/504230" }] },
            { title: "Dark Souls III", image: "https://cdn.akamai.steamstatic.com/steam/apps/374320/header.jpg", metacritic: 89, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/374320" }] },
            { title: "Sekiro: Shadows Die Twice", image: "https://cdn.akamai.steamstatic.com/steam/apps/814380/header.jpg", metacritic: 91, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/814380" }] },
            { title: "Elden Ring", image: "https://cdn.akamai.steamstatic.com/steam/apps/1245620/header.jpg", metacritic: 94, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/1245620" }] },
            { title: "Stardew Valley", image: "https://cdn.akamai.steamstatic.com/steam/apps/413150/header.jpg", metacritic: 89, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/413150" }] },
            { title: "Terraria", image: "https://cdn.akamai.steamstatic.com/steam/apps/105600/header.jpg", metacritic: 91, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/105600" }] },
            { title: "Portal 2", image: "https://cdn.akamai.steamstatic.com/steam/apps/620/header.jpg", metacritic: 95, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/620" }] },
            { title: "Half-Life 2", image: "https://cdn.akamai.steamstatic.com/steam/apps/220/header.jpg", metacritic: 96, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/220" }] },
            { title: "DOOM Eternal", image: "https://cdn.akamai.steamstatic.com/steam/apps/782330/header.jpg", metacritic: 90, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/782330" }] },
            { title: "The Elder Scrolls V: Skyrim", image: "https://cdn.akamai.steamstatic.com/steam/apps/72850/header.jpg", metacritic: 94, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/72850" }] },
            { title: "Among Us", image: "https://cdn.akamai.steamstatic.com/steam/apps/945360/header.jpg", metacritic: 85, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/945360" }] },
            { title: "Fall Guys", image: "https://cdn.akamai.steamstatic.com/steam/apps/1097150/header.jpg", metacritic: 80, storeLinks: [{ store: "Epic Games", url: "https://store.epicgames.com/p/fall-guys" }] },
            { title: "Minecraft", image: "https://cdn2.steamstatic.com/steam/apps/91310/header.jpg", metacritic: 93, storeLinks: [{ store: "Minecraft", url: "https://www.minecraft.net/" }] },
            { title: "The Sims 4", image: "https://cdn.akamai.steamstatic.com/steam/apps/1222670/header.jpg", metacritic: 70, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/1222670" }] },
            { title: "FIFA 23", image: "https://cdn.akamai.steamstatic.com/steam/apps/1811260/header.jpg", metacritic: 78, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/1811260" }] },
            { title: "Call of Duty: Modern Warfare II", image: "https://cdn.akamai.steamstatic.com/steam/apps/1938090/header.jpg", metacritic: 82, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/1938090" }] },
            { title: "Apex Legends", image: "https://cdn.akamai.steamstatic.com/steam/apps/1172470/header.jpg", metacritic: 88, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/1172470" }] },
            { title: "Valorant", image: "https://cdn2.steamstatic.com/steam/apps/91310/header.jpg", metacritic: 80, storeLinks: [{ store: "Riot Games", url: "https://playvalorant.com/" }] },
            { title: "League of Legends", image: "https://cdn2.steamstatic.com/steam/apps/91310/header.jpg", metacritic: 78, storeLinks: [{ store: "Riot Games", url: "https://www.leagueoflegends.com/" }] },
            { title: "Fortnite", image: "https://cdn2.steamstatic.com/steam/apps/91310/header.jpg", metacritic: 83, storeLinks: [{ store: "Epic Games", url: "https://store.epicgames.com/p/fortnite" }] },
            { title: "Overwatch 2", image: "https://cdn2.steamstatic.com/steam/apps/91310/header.jpg", metacritic: 81, storeLinks: [{ store: "Blizzard", url: "https://playoverwatch.com/" }] },
            { title: "PUBG: Battlegrounds", image: "https://cdn.akamai.steamstatic.com/steam/apps/578080/header.jpg", metacritic: 86, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/578080" }] },
            { title: "Rocket League", image: "https://cdn.akamai.steamstatic.com/steam/apps/252950/header.jpg", metacritic: 90, storeLinks: [{ store: "Epic Games", url: "https://store.epicgames.com/p/rocket-league" }] },
            { title: "GTA V", image: "https://cdn.akamai.steamstatic.com/steam/apps/271590/header.jpg", metacritic: 96, storeLinks: [{ store: "Steam", url: "https://store.steampowered.com/app/271590" }] },
            { title: "Far Cry 6", image: "https://cdn.akamai.steamstatic.com/steam/apps/524220/header.jpg", metacritic: 75, storeLinks: [{ store: "Ubisoft", url: "https://store.ubi.com/" }] }
        ];

        const gamesPerPage = 10; // Número de jogos por página
        let currentPage = 1;

        // Função para carregar jogos
        function loadGames(page = 1) {
            gamesContainer.innerHTML = '';
            const startIndex = (page - 1) * gamesPerPage;
            const endIndex = startIndex + gamesPerPage;
            const gamesToDisplay = sampleGames.slice(startIndex, endIndex);

            if (gamesToDisplay.length === 0) {
                gamesContainer.innerHTML = '<div class="loading">Nenhum jogo encontrado.</div>';
                return;
            }

            gamesToDisplay.forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card';
                gameCard.innerHTML = `
                    <img src="${game.image}" alt="${game.title}" class="game-image">
                    <div class="game-info">
                        <h3 class="game-title">${game.title}</h3>
                        <div class="metacritic-score">Metacritic: ${game.metacritic}</div>
                        <div class="store-links">
                            ${game.storeLinks.map(link => `
                                <a href="${link.url}" target="_blank" class="store-link">
                                    Comprar na ${link.store}
                                </a>
                            `).join('')}
                        </div>
                    </div>
                `;
                gamesContainer.appendChild(gameCard);
            });

            generatePagination();
        }

        // Função para gerar paginação
        function generatePagination() {
            pagination.innerHTML = '';
            const totalPages = Math.ceil(sampleGames.length / gamesPerPage);

            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i;
                pageButton.className = i === currentPage ? 'active' : '';
                pageButton.addEventListener('click', () => {
                    currentPage = i;
                    loadGames(currentPage);
                });
                pagination.appendChild(pageButton);
            }
        }

        // Event Listeners
        searchButton.addEventListener('click', () => {
            loadGames(1);
        });

        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                loadGames(1);
            }
        });

        // Carrega jogos ao iniciar
        loadGames();
    </script>
</body>
</html>